
from mvn_utils import read_remote_file
from mvn_utils import sha1
from maven_package import MavenPackage, PackageID, package_manager

# class PackageRegistrar(object):


def maven(pkg, repo='http://repo1.maven.org/maven2/'):
    package = MavenPackage(package = pkg, repository = repo)
    package.display_tree()
    print package.get_flat_dependencies()

maven('com.facebook.fresco:fresco:0.11.0')

package_manager.register_to_buck()
# print get_deps('com_facebook_fresco__fresco')

def build_up():
    register_packages_and_dependencies()

sdkPath = '/home/vinz243/android-sdk'
def local_maven(pkg):
    group, name, version = pkg.split(':', 3)
    file = (sdkPath + '/extras/android/m2repository/'
        + group.replace('.', '/') + '/' + name + '/' + version + '/' + name
        + '-' + version + '.aar')
    target = name + '-' + version +'.aar'

    if not os.path.isfile(target):
        copyfile(file, 'libs/' + target)

    android_prebuilt_aar(
      name = name,
      aar = target,
      visibility = ['PUBLIC']
    )
